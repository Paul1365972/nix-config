# MPV Configuration for Darkness
#
# Workaround for DRM sync_file descriptor leak in Mesa v3d driver on Wayland
# that causes "Error 24 (Too many open files)" crash after 2-3 minutes.
# Leak rate: ~24 anon_inode:sync_file descriptors per second.
#
# See: https://gitlab.freedesktop.org/mesa/mesa/-/issues/1949
#      https://gitlab.freedesktop.org/mesa/mesa/-/issues/6377

# OPTION 1: Software rendering (RECOMMENDED - most stable)
# Uses CPU-only rendering via Wayland shared memory
# Trade-off: Higher CPU usage, no GPU acceleration, guaranteed no leak
vo=wlshm

# OPTION 2: Hardware-accelerated decoding (alternative - may have other issues)
# Uses GPU for video decode but copies to system RAM, avoiding the sync_file leak
# Trade-off: Lower CPU usage, GPU accelerated, but can cause other playback issues
# Uncomment the lines below and comment out Option 1 to use:
# hwdec=drm-copy
# gpu-context=wayland
# vo=gpu

# Other alternatives (not recommended):
# vo=gpu-next       # Newer GPU renderer (may still have the leak)
# vo=x11            # X11 output (requires Xwayland)
# hwdec=auto        # Auto hardware decode (has the leak)
